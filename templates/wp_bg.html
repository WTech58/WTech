<!DOCTYPE html>
<html>
<head>
  <title>百家樂</title>
  <style>
    body {
      background-color: green;
      color: white;
      font-family: sans-serif;
      text-align: center;
      padding: 20px;
    }

    h1 {
      font-size: 3em;
      margin-bottom: 20px;
    }

    button {
      background-color: #4CAF50;
      color: white;
      padding: 10px 20px;
      margin: 10px;
      border: none;
      cursor: pointer;
      font-size: 1em;
    }

    .choice-buttons {
      display: flex;
      justify-content: center;
    }

    .choice-buttons button {
      margin: 0 10px;
    }
  </style>
</head>
<body>

  <h1>百家樂</h1>

  <p>歡迎，{{ user }}！您的餘額：{{ balance }}</p>

  <div class="choice-buttons">
    <button id="player-button">閒</button>
    <button id="banker-button">莊</button>
  </div>

  <button id="bet-button">下注</button>
  <button id="all-in-button">全部下注</button>

  <script>
    // 假設下注金額
    let betAmount = 10;
    let chosenSide = null; // 儲存閒或莊的選擇

    // 閒按鈕事件
    document.getElementById('player-button').addEventListener('click', function() {
      chosenSide = 'player';
      console.log('選擇閒');
    });

    // 莊按鈕事件
    document.getElementById('banker-button').addEventListener('click', function() {
      chosenSide = 'banker';
      console.log('選擇莊');
    });

    // 下注按鈕事件
    document.getElementById('bet-button').addEventListener('click', function() {
      if (chosenSide) {
        // 這裡應該呼叫後端 API 進行下注操作，傳遞 chosenSide 和 betAmount
        // 例如：
        fetch('/bg:bet', {
           method: 'POST',
           body: JSON.stringify({ side: chosenSide, amount: betAmount, user: '{{user}}' })
         })
        .then(response => response.json())
         .then(data => {
        //   // 更新餘額
          document.querySelector('p').textContent = `歡迎，{{ user }}！您的餘額：${data.balance}`;
         });

        console.log(`下注 ${betAmount} 在 ${chosenSide}`);
        chosenSide = null; // 重置選擇
      } else {
        alert('請先選擇閒或莊');
      }
    });

    // 全部下注按鈕事件
    document.getElementById('all-in-button').addEventListener('click', function() {
      if (chosenSide) {
        // 這裡應該呼叫後端 API 進行全部下注操作，傳遞 chosenSide
        // 例如：
        fetch('/bg/all-in', {
           method: 'POST',
           body: JSON.stringify({ side: chosenSide, user: '{{user}}' })
        })
         .then(response => response.json())
         .then(data => {
        //   // 更新餘額
           document.querySelector('p').textContent = `歡迎，{{ user }}！您的餘額：${data.balance}`;
         });

        console.log(`全部下注在 ${chosenSide}`);
        chosenSide = null; // 重置選擇
      } else {
        alert('請先選擇閒或莊');
      }
    });
  </script>

</body>
</html>
